FROM rasa/rasa:latest

USER root
WORKDIR /chatbot
COPY . /chatbot

RUN rasa train

# Set environment variable to suppress SQLAlchemy warning
ENV SQLALCHEMY_SILENCE_UBER_WARNING=1

USER 1001

# Use ENTRYPOINT with CMD
ENTRYPOINT ["rasa"]
CMD ["run", "--enable-api", "--cors", "*", "--port", "5005", "--endpoints", "endpoints.yml"]